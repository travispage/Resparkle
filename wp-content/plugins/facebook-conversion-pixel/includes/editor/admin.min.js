var basic_params=["value","currency","content_name","content_type","content_ids","content_category","search_string","num_items","status","custom"],supported_params={ViewContent:{value:1,currency:1,content_name:1,content_type:1,content_ids:1,content_category:0,search_string:0,num_items:0,status:0,custom:1},Search:{value:1,currency:1,content_name:0,content_type:0,content_ids:1,content_category:1,search_string:1,num_items:0,status:0,custom:1},AddToCart:{value:1,currency:1,content_name:1,content_type:1,content_ids:1,content_category:0,search_string:0,num_items:0,status:0,custom:1},AddToWishlist:{value:1,currency:1,content_name:1,content_type:0,content_ids:1,content_category:1,search_string:0,num_items:0,status:0,custom:1},InitiateCheckout:{value:1,currency:1,content_name:1,content_type:0,content_ids:1,content_category:1,search_string:0,num_items:1,status:0,custom:1},AddPaymentInfo:{value:1,currency:1,content_name:0,content_type:0,content_ids:1,content_category:1,search_string:0,num_items:0,status:0,custom:1},Purchase:{value:2,currency:2,content_name:1,content_type:1,content_ids:1,content_category:0,search_string:0,num_items:1,status:0,custom:1},Lead:{value:1,currency:1,content_name:1,content_type:0,content_ids:0,content_category:1,search_string:0,num_items:0,status:0,custom:1},CompleteRegistration:{value:1,currency:1,content_name:1,content_type:0,content_ids:0,content_category:0,search_string:0,num_items:0,status:1,custom:1},custom:{value:0,currency:0,content_name:0,content_type:0,content_ids:0,content_category:0,search_string:0,num_items:0,status:0,custom:1}},time_delay_events=["ViewContent","custom"];jQuery(document).ready(function(t){function e(){t(".fca_pc_event_row").each(function(){c(t(this),JSON.parse(t(this).find(".fca-pc-json").val()))})}function a(){t(".fca_delete_icon_confirm").unbind("click"),t(".fca_delete_icon_confirm").click(function(){t(this).closest(".fca_deletable_item").hide("fast",function(){t(this).remove()})}),t(".fca_delete_icon_cancel").unbind("click"),t(".fca_delete_icon_cancel").click(function(){t(this).hide(),t(this).siblings(".fca_delete_icon").hide(),t(this).siblings(".fca_delete_button").show()}),t(".fca_delete_button").unbind("click"),t(".fca_delete_button").click(function(){t(this).hide().siblings(".fca_delete_icon").show()}),t(".fca_pc_event_row").unbind("click"),t(".fca_pc_event_row").click(function(e){t(e.target).hasClass("fca_delete_icon")===!1&&(t("#fca-pc-event-save").data("eventID",t(this).attr("ID")),i(JSON.parse(t(this).find(".fca-pc-json").val())),t("#fca-pc-event-modal").show(),t("#fca-pc-overlay").show())})}function c(e,c){fcaPcDebug.debug&&console.log(c),e?(e.attr("id",c.ID),e.find(".fca-pc-event-td").html(c.event),e.find(".fca-pc-trigger-td").html(n(c.trigger))):(t("#fca-pc-events").append(fcaPcAdminData.eventTemplate.replace("{{EVENT}}",c.event).replace("{{TRIGGER}}",n(c.trigger)).replace("{{ID}}",c.ID)),a()),t("#"+c.ID).find(".fca-pc-json").val(JSON.stringify(c))}function n(e){if("string"==typeof e)return e;var a=[];return t("#fca-pc-modal-post-trigger-input option").filter(function(a,c){return-1!==e.indexOf(t(c).val())}).each(function(){a.push(t(this).html())}),a.join(", ")}function i(e){if(t("#fca_pc_custom_param_table").find(".fca_delete_icon_confirm").click(),supported_params.hasOwnProperty(e.event)){t("#fca-pc-modal-event-input").val(e.event).change();for(var a=0;a<basic_params.length;a++)t(".fca-pc-"+basic_params[a]).val(e.parameters.hasOwnProperty(basic_params[a])?e.parameters[basic_params[a]]:"");for(var c in e.parameters)-1===basic_params.indexOf(c)&&(t("#fca-pc-add-custom-param").click(),t(".fca-pc-input-parameter-name").last().val(c),t(".fca-pc-input-parameter-value").last().val(e.parameters[c]))}else{t("#fca-pc-modal-event-input").val("custom").change(),t(".fca-pc-event_name").val(e.event);for(var c in e.parameters)t("#fca-pc-add-custom-param").click(),t(".fca-pc-input-parameter-name").last().val(c),t(".fca-pc-input-parameter-value").last().val(e.parameters[c])}var n=e.hasOwnProperty("delay")?e.delay:0;switch(t("#fca-pc-modal-delay-input").val(n),t("#fca-pc-modal-trigger-type-input").val(e.triggerType).change(),e.triggerType){case"post":t("#fca-pc-modal-post-trigger-input").children().each(function(){-1!==e.trigger.indexOf(t(this).val())?t(this).prop("selected",!0):t(this).prop("selected",!1)}).change();break;case"css":t("#fca-pc-modal-css-trigger-input").val(e.trigger);break;case"url":t("#fca-pc-modal-url-trigger-input").val(e.trigger)}}function o(){var t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,a=4294967296*Math.random()>>>0,c=4294967296*Math.random()>>>0;return r[255&t]+r[t>>8&255]+r[t>>16&255]+r[t>>24&255]+"-"+r[255&e]+r[e>>8&255]+"-"+r[e>>16&15|64]+r[e>>24&255]+"-"+r[63&a|128]+r[a>>8&255]+"-"+r[a>>16&255]+r[a>>24&255]+r[255&c]+r[c>>8&255]+r[c>>16&255]+r[c>>24&255]}e(),t(".fca_pc_multiselect").select2(),t("#fca-pc-helptext, .fca_pc_error_tip").tooltipster({trigger:"custom",timer:6e3,maxWidth:350,theme:["tooltipster-borderless","tooltipster-pixel-cat"]}),t(".fca_pc_tooltip, .fca_pc_event_tooltip").tooltipster({contentAsHTML:!0,theme:["tooltipster-borderless","tooltipster-pixel-cat"]}),t(".fca-pc-id").on("input",function(){var e=t(this).val();/^\d+$/.test(e)||""===e||(t(this).val(""),t("#fca-pc-helptext").tooltipster("open"))}),t(".fca-pc-nav a").click(function(){t(".nav-tab-active").removeClass("nav-tab-active"),t(this).addClass("nav-tab-active"),t(".fca-pc-nav a").each(function(){t(t(this).data("target")).hide()}),t(t(this).data("target")).show(),t(this).blur()}),t(".fca-pc-nav a").first().click(),t(".fca_pc_integrations_table th").click(function(){t(this).next().find("input").click()}),t("#fca_pc_new_event").click(function(){t("#fca-pc-event-save").data("eventID",""),t(".fca-pc-content_name").val("{post_title}"),t(".fca-pc-content_type").val("product"),t(".fca-pc-content_ids").val("{post_id}"),t(".fca-pc-content_category").val("{post_category}"),t(".fca-pc-search_string").val(""),t(".fca-pc-num_items").val(""),t(".fca-pc-status").val(""),t(".fca-pc-value").val(""),t(".fca-pc-currency").val(""),t(".fca-pc-event_name").val(""),t("#fca-pc-modal-post-trigger-input").val("").change(),t("#fca-pc-modal-css-trigger-input").val(""),t("#fca-pc-modal-url-trigger-input").val(""),t("#fca-pc-modal-delay-input").val(0),"undefined"==typeof fcaPcPremiumData&&(t(".fca-pc-content_name").val(""),t(".fca-pc-content_type").val(""),t(".fca-pc-content_ids").val(""),t(".fca-pc-content_category").val("")),t("#fca-pc-modal-event-input").val("ViewContent").change(),t("#fca-pc-event-modal").show(),t("#fca-pc-overlay").show()}),t("#fca-pc-event-cancel").click(function(){t("#fca-pc-event-modal").hide(),t(".fca_pc_tooltip").tooltipster("hide"),t("#fca-pc-overlay").hide()}),t("#fca_pc_main_form").bind("keypress keydown keyup",function(e){var a=t(e.target).hasClass("select2-search__field");return 27!=e.keyCode||a||t("#fca-pc-event-cancel").click(),13!=e.keyCode||a?void 0:(e.preventDefault(),t("#fca-pc-event-modal").is(":visible")&&t("#fca-pc-event-save").click(),!1)}),t("#fca-pc-event-save").click(function(){var e=!0;if(t(".fca_pc_tooltip").tooltipster("close"),t("#fca-pc-modal-post-trigger-input").val()||"post"!==t("#fca-pc-modal-trigger-type-input").val()||(t("#fca-pc-modal-post-trigger-input").closest("tr").find(".fca_pc_tooltip").tooltipster("show"),e=!1),t("#fca-pc-modal-css-trigger-input").val()||"css"!==t("#fca-pc-modal-trigger-type-input").val()||(t("#fca-pc-modal-css-trigger-input").closest("tr").find(".fca_pc_tooltip").tooltipster("show"),e=!1),t("#fca-pc-modal-url-trigger-input").val()||"url"!==t("#fca-pc-modal-trigger-type-input").val()||(t("#fca-pc-modal-url-trigger-input").closest("tr").find(".fca_pc_tooltip").tooltipster("show"),e=!1),t(".fca-required-param").each(function(){t(this).find("input").val()||(t("#fca-pc-show-param").click(),t(this).find(".fca_pc_tooltip").tooltipster("show"),e=!1)}),t(".fca-pc-event_name").val()||"custom"!==t("#fca-pc-modal-event-input").val()||(t(".fca-pc-event_name").closest("tr").find(".fca_pc_tooltip").tooltipster("show"),e=!1),!e)return!1;var a={};switch(a.triggerType=t("#fca-pc-modal-trigger-type-input").val(),a.triggerType){case"css":a.trigger=t("#fca-pc-modal-css-trigger-input").val();break;case"post":a.trigger=t("#fca-pc-modal-post-trigger-input").val();break;case"url":a.trigger=t("#fca-pc-modal-url-trigger-input").val()}if(a.parameters={},"custom"===t("#fca-pc-modal-event-input").val())a.event=t(".fca-pc-event_name").val();else{a.event=t("#fca-pc-modal-event-input").val();for(var n=0;n<basic_params.length;n++){var i=basic_params[n];supported_params[a.event][i]>0&&""!=t(".fca-pc-"+i).val()&&(a.parameters[i]=t(".fca-pc-"+i).val())}}t(".fca-pc-input-parameter-name").each(function(){var e=t(this).val(),c=t(this).parent("td").next().find(".fca-pc-input-parameter-value").val();e&&c&&(a.parameters[e]=c)}),(-1!==time_delay_events.indexOf(a.event)||"custom"===t("#fca-pc-modal-event-input").val())&&(a.delay=t("#fca-pc-modal-delay-input").val()),a.apiAction="custom"===t("#fca-pc-modal-event-input").val()?"trackCustom":"track",t(this).data("eventID")?(a.ID=t(this).data("eventID"),c(t("#"+a.ID),a)):(a.ID=o(),c(!1,a)),t("#fca-pc-overlay").hide(),t("#fca-pc-event-modal").hide()}),t("#fca-pc-modal-event-input").change(function(){var e=t(this).val();t(".fca-active-param").removeClass("fca-active-param"),t(".fca-required-param").removeClass("fca-required-param"),t(".fca_pc_tooltip").tooltipster("hide"),t("#fca_pc_tooltip_viewcontent, #fca_pc_tooltip_lead").hide(),t(".fca-required-param-tooltip").hide();for(item in supported_params[e])supported_params[e][item]>0&&(t("#fca_pc_param_"+item).addClass("fca-active-param"),2===supported_params[e][item]&&(t("#fca_pc_param_"+item).addClass("fca-required-param"),t(".fca-required-param-tooltip").show(),t("#fca-pc-show-param").click()));t(".fca-pc-param-toggle").not(":visible").click(),-1!==time_delay_events.indexOf(t(this).val())&&"post"===t("#fca-pc-modal-trigger-type-input").val()?(t("#fca-pc-modal-delay-input").closest("tr").show(),t("#fca_pc_tooltip_viewcontent").show()):(t("#fca-pc-modal-delay-input").closest("tr").hide(),t("#fca_pc_tooltip_lead").show()),t("#fca_pc_param_custom").addClass("fca-active-param"),"custom"===e?t("#fca_pc_param_event_name").show():t("#fca_pc_param_event_name").hide()}),t(".fca-pc-param-toggle").click(function(){t(".fca-pc-param-row").hide(),"fca-pc-show-param"===t(this).attr("id")?(t("#fca-pc-show-param").hide(),t("#fca-pc-hide-param").show(),t("#fca-pc-param-help").show(),t(".fca-active-param").show()):(t("#fca-pc-hide-param").hide(),t("#fca-pc-show-param").show(),t("#fca-pc-param-help").hide())}),t(".fca-pc-woo_feed").change(function(){this.checked?t(".fca-pc-woo-feed-settings").not(".fca-pc-woo-advanced-feed-settings").show("fast"):t(".fca-pc-woo-feed-settings").hide("fast")}).change(),t(".fca-pc-feed-toggle").click(function(){t(".fca-pc-feed-toggle").hide(),"fca-pc-show-feed-settings"===t(this).attr("id")?(t("#fca-pc-show-feed-settings").hide(),t("#fca-pc-hide-feed-settings").show(),t(".fca-pc-woo-advanced-feed-settings").show()):(t("#fca-pc-show-feed-settings").show(),t("#fca-pc-hide-feed-settings").hide(),t(".fca-pc-woo-advanced-feed-settings").hide())}),t(".fca-pc-integration-disabled input").each(function(){t(this).attr("checked",!1),t(this).attr("disabled",!0)}),"undefined"!=typeof fcaPcPremiumData&&t("#fca-pc-add-custom-param").click(function(){t("#fca_pc_custom_param_table").append(fcaPcPremiumData.customParamTemplate),a()}),t("#fca-pc-modal-trigger-type-input").change(function(){t(".fca_pc_multiselect").select2("close"),t("#fca-pc-post-input-tr, #fca-pc-css-input-tr, #fca-pc-url-input-tr").hide(),t("#fca-pc-modal-event-input").change(),t("#fca-pc-"+t(this).val()+"-input-tr").show()}).change(),a(),""!==t(".fca-pc-id").val()&&t("#fca-pc-setup-notice").hide();var p=!0;window.onbeforeunload=function(){return p},t("#fca_pc_save").click(function(){p=null}),t("#fca_pc_main_form, #fca-pc-marketing-metabox").show();for(var r=[],s=0;256>s;s++)r[s]=(16>s?"0":"")+s.toString(16)});